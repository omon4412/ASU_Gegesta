@page
@model ASU_Degesta.Pages.Roles.Index
@using Microsoft.AspNetCore.Identity
@using ASU_Degesta.Models

@inject SignInManager<DegestaUser> SignInManager
@inject UserManager<DegestaUser> UserManager
@inject RoleManager<IdentityRole> RoleManager

@{
    ViewData["Title"] = "Должности";
}
<partial name="_StatusMessage" for="StatusMessage"/>
<h1>@ViewData["Title"]</h1>
<a href="/" class="btn btn-primary">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-return-left" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M14.5 1.5a.5.5 0 0 1 .5.5v4.8a2.5 2.5 0 0 1-2.5 2.5H2.707l3.347 3.346a.5.5 0 0 1-.708.708l-4.2-4.2a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 8.3H12.5A1.5 1.5 0 0 0 14 6.8V2a.5.5 0 0 1 .5-.5z"></path>
    </svg>
    Вернуться к списку
</a>
<form id="" method="post">
    <div asp-validation-summary="All" class="text-danger"></div>

    <div class="form-floating">
        <input asp-for="Input.NewRole" class="form-control" aria-required="true"/>
        <label class="form-label"></label>
        <span class="text-danger"></span>
    </div>
    <button id="" type="submit" class="w-100 btn btn-lg btn-primary">Добавить должность</button>
</form>

<table class="table">
    @foreach (var role in RoleManager.Roles.ToList())
    {
        <tr>
            @* <td>@(user.Name=="" || user.Name==null?user.Email:user.Name)</td> *@
            <td>@role.Name</td>
            @* <td> *@
            @*     <form asp-page-handler="edit" asp-route-id="@role.Id" method="post"> *@
            @*         <button type="submit" class="btn btn-sm btn-primary"> *@
            @*             Редактировать *@
            @*         </button> *@
            @*     </form> *@
            @* </td> *@
            <td>
                <form asp-page-handler="delete" asp-route-id="@role.Id" method="post">
                    <button type="submit" class="btn btn-sm btn-danger">
                        Удалить
                    </button>
                </form>
            </td>
        </tr>
    }
</table>

@* <select name="example"> *@
@*     @foreach (var role in RoleManager.Roles.ToList()) *@
@*     { *@
@*         <option value=@role.Id>@role.Name</option> *@
@*     } *@
@* </select> *@

@* <h2>Список сотрудников</h2> *@
<br><a class="btn btn-sm btn-primary" asp-page="UserList">Список сотрудников</a>


@* @{ *@
@*     //UserManager.AddToRoleAsync(UserManager.GetUserAsync(User).Result, ASU_Degesta.Models.Constants.AdminRole); *@
@*     var bannedUser = UserManager.FindByNameAsync(User.Identity.Name).Result; *@
@*     if (bannedUser != null) *@
@*     { *@
@*         await UserManager.AddToRoleAsync(bannedUser, "test"); *@
@*         await SignInManager.RefreshSignInAsync(bannedUser); *@
@*         //"Succesfully banned user " + Input.UsernameToBan + "."; *@
@*     } *@
@* } *@